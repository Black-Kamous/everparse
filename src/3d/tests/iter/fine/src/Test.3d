
extern typedef struct out_iterator OUT
extern void setCurrentf1(mutable OUT* p, UINT32 f1, mutable UINT8* perr)
extern void setCurrentf2(mutable OUT* p, UINT32 f1, mutable UINT8* perr)
extern void advance(mutable OUT* p, mutable UINT8* perr)
 
typedef struct pair (mutable OUT* p, mutable UINT8* perr) {
    UINT32 f1{:on-success setCurrentf1(p, f1, perr); var err = *perr; return (err == 0); };
    UINT32 f2{:on-success setCurrentf2(p, f2, perr);
                    advance(p, perr);
                    var err = *perr;
                    return (err == 0);
    };
} PAIR;

entrypoint
typedef struct container (mutable OUT* p, mutable UINT8* perr) {
    UINT32 len;
    PAIR(p, perr) pairs[:byte-size len];
} CONTAINER;
