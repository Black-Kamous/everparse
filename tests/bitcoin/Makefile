TEST_BLOCKS= \
    0000000000000000079c58e8b5bce4217f7515a74b170049398ed9b8428beb4a \
    0000000000000000027d0985fef71cbc05a5ee5cdbdc4c6baf2307e6c5db8591 \
    000000000000000004a61d12b170301f5a85e535e6b06b59028ee0a56da53723 \
    00000000000000000d73f67b98aaef0867aaa6b0ef313181771f7e5127f69215 \
    0000000000000000002b18fe332a18545662ac7a69f6400c041a2e67d893abe4 \
    00000000000000000ffd870e1df6011df7da46160c9945dad7d8a84ac6a543d3 \
    0000000000000000135b1dc5d2d394b2b52ce61b4580ca9f150cebdaed5cb2a6 \
    000000000000000009e33c59fc211e32637e3714897cb516d570841dfe3f70ef \
    000000000000000014413d163da3bdc2af3194ec24edb319c1689d4beb740b69 \
    0000000000000000046d7e6b8b73efe0027f0b0bd9c0c8946240cc4d10624fda \


all: $(addsuffix .test,$(TEST_BLOCKS))

../unit/test.exe:
	+$(MAKE) -C ../unit

%.test: %.raw ../unit/test.exe
	../unit/test.exe $<
	touch $@

%.raw: %.hex
	xxd -r -p $< > $@

%.hex:
	wget -O $@ "https://blockchain.info/block/$(basename $@)?format=hex"

.PRECIOUS: %.raw %.hex
